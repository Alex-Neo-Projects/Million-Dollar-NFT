!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("@hypnosphi/create-react-context"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","react","@hypnosphi/create-react-context","popper.js"],t):t(e.ReactPopper={},e.React,null,e.Popper)}(this,function(e,r,t,p){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function n(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t=t&&t.hasOwnProperty("default")?t.default:t,p=p&&p.hasOwnProperty("default")?p.default:p;var c=t(),u=t(),o=function(o){function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return a(s(s(t=o.call.apply(o,[this].concat(n))||this)),"referenceNode",void 0),a(s(s(t)),"setReferenceNode",function(e){e&&t.referenceNode!==e&&(t.referenceNode=e,t.forceUpdate())}),t}n(e,o);var t=e.prototype;return t.componentWillUnmount=function(){this.referenceNode=null},t.render=function(){return r.createElement(c.Provider,{value:this.referenceNode},r.createElement(u.Provider,{value:this.setReferenceNode},this.props.children))},e}(r.Component),l=function(e){return Array.isArray(e)?e[0]:e},d=function(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}},f=function(e,t){if("function"==typeof e)return d(e,t);null!=e&&(e.current=t)},h={position:"absolute",top:0,left:0,opacity:0,pointerEvents:"none"},m={},y=function(o){function e(){for(var n,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a(s(s(n=o.call.apply(o,[this].concat(t))||this)),"state",{data:void 0,placement:void 0}),a(s(s(n)),"popperInstance",void 0),a(s(s(n)),"popperNode",null),a(s(s(n)),"arrowNode",null),a(s(s(n)),"setPopperNode",function(e){e&&n.popperNode!==e&&(f(n.props.innerRef,e),n.popperNode=e,n.updatePopperInstance())}),a(s(s(n)),"setArrowNode",function(e){n.arrowNode=e}),a(s(s(n)),"updateStateModifier",{enabled:!0,order:900,fn:function(e){var t=e.placement;return n.setState({data:e,placement:t}),e}}),a(s(s(n)),"getOptions",function(){return{placement:n.props.placement,eventsEnabled:n.props.eventsEnabled,positionFixed:n.props.positionFixed,modifiers:i({},n.props.modifiers,{arrow:i({},n.props.modifiers&&n.props.modifiers.arrow,{enabled:!!n.arrowNode,element:n.arrowNode}),applyStyle:{enabled:!1},updateStateModifier:n.updateStateModifier})}}),a(s(s(n)),"getPopperStyle",function(){return n.popperNode&&n.state.data?i({position:n.state.data.offsets.popper.position},n.state.data.styles):h}),a(s(s(n)),"getPopperPlacement",function(){return n.state.data?n.state.placement:void 0}),a(s(s(n)),"getArrowStyle",function(){return n.arrowNode&&n.state.data?n.state.data.arrowStyles:m}),a(s(s(n)),"getOutOfBoundariesState",function(){return n.state.data?n.state.data.hide:void 0}),a(s(s(n)),"destroyPopperInstance",function(){n.popperInstance&&(n.popperInstance.destroy(),n.popperInstance=null)}),a(s(s(n)),"updatePopperInstance",function(){n.destroyPopperInstance();var e=s(s(n)).popperNode,t=n.props.referenceElement;t&&e&&(n.popperInstance=new p(t,e,n.getOptions()))}),a(s(s(n)),"scheduleUpdate",function(){n.popperInstance&&n.popperInstance.scheduleUpdate()}),n}n(e,o);var t=e.prototype;return t.componentDidUpdate=function(e,t){this.props.placement!==e.placement||this.props.referenceElement!==e.referenceElement||this.props.positionFixed!==e.positionFixed||this.props.modifiers!==e.modifiers?this.updatePopperInstance():this.props.eventsEnabled!==e.eventsEnabled&&this.popperInstance&&(this.props.eventsEnabled?this.popperInstance.enableEventListeners():this.popperInstance.disableEventListeners()),t.placement!==this.state.placement&&this.scheduleUpdate()},t.componentWillUnmount=function(){f(this.props.innerRef,null),this.destroyPopperInstance()},t.render=function(){return l(this.props.children)({ref:this.setPopperNode,style:this.getPopperStyle(),placement:this.getPopperPlacement(),outOfBoundaries:this.getOutOfBoundariesState(),scheduleUpdate:this.scheduleUpdate,arrowProps:{ref:this.setArrowNode,style:this.getArrowStyle()}})},e}(r.Component);a(y,"defaultProps",{placement:"bottom",eventsEnabled:!0,referenceElement:void 0,positionFixed:!1});var v=p.placements;var b=function(){},P=function(o){function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return a(s(s(t=o.call.apply(o,[this].concat(n))||this)),"refHandler",function(e){f(t.props.innerRef,e),d(t.props.setReferenceNode,e)}),t}n(e,o);var t=e.prototype;return t.componentWillUnmount=function(){f(this.props.innerRef,null)},t.render=function(){return b(Boolean(this.props.setReferenceNode),"`Reference` should not be used outside of a `Manager` component."),l(this.props.children)({ref:this.refHandler})},e}(r.Component);e.Popper=function(e){var t=e.referenceElement,n=function(e,t){if(null==e)return{};var n,r,o={},p=Object.keys(e);for(r=0;r<p.length;r++)n=p[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,["referenceElement"]);return r.createElement(c.Consumer,null,function(e){return r.createElement(y,i({referenceElement:void 0!==t?t:e},n))})},e.placements=v,e.Manager=o,e.Reference=function(t){return r.createElement(u.Consumer,null,function(e){return r.createElement(P,i({setReferenceNode:e},t))})},Object.defineProperty(e,"__esModule",{value:!0})});
